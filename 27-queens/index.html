



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://nus-cs1010.github.io/1819-s1/27-queens/index.html">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>27. N Queens - CS1010 Programming Methodology</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#unit-27-n-queens" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://nus-cs1010.github.io/1819-s1" title="CS1010 Programming Methodology" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                CS1010 Programming Methodology
              </span>
              <span class="md-header-nav__topic">
                27. N Queens
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/nus-cs1010/1819-s1/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    CS1010 Programming Methodology
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/nus-cs1010/1819-s1/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../midterm/index.html" title="Midterm" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../pe1/index.html" title="Practical Exam" class="md-nav__link">
      Practical Exam
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/index.html" title="About CS1010" class="md-nav__link">
      About CS1010
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../outcomes/index.html" title="Learning Outcomes" class="md-nav__link">
      Learning Outcomes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../schedule/index.html" title="Schedule" class="md-nav__link">
      Schedule
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../accounts/index.html" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../policies/index.html" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-program/index.html" title="1. What is a Program?" class="md-nav__link">
      1. What is a Program?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-algo/index.html" title="2. Computational Problem &amp; Algorithms" class="md-nav__link">
      2. Computational Problem &amp; Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-func/index.html" title="3. Functions" class="md-nav__link">
      3. Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-type/index.html" title="4. Types" class="md-nav__link">
      4. Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-first-c/index.html" title="5. First C Program" class="md-nav__link">
      5. First C Program
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06-cs1010-io/index.html" title="6. CS1010 I/O Library" class="md-nav__link">
      6. CS1010 I/O Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07-arithmetic-ops/index.html" title="7. Arithmetic Operations" class="md-nav__link">
      7. Arithmetic Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../08-if-else/index.html" title="8. If Else" class="md-nav__link">
      8. If Else
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../09-logical-exp/index.html" title="9. Logical Expression" class="md-nav__link">
      9. Logical Expression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../10-assert/index.html" title="10. Assertion" class="md-nav__link">
      10. Assertion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../11-loop/index.html" title="11. Loops" class="md-nav__link">
      11. Loops
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../12-invariant/index.html" title="12. Reasoning About Loops" class="md-nav__link">
      12. Reasoning About Loops
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../13-call-stack/index.html" title="13. Call Stack" class="md-nav__link">
      13. Call Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../14-pointers/index.html" title="14. Pointers" class="md-nav__link">
      14. Pointers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../15-array/index.html" title="15. Arrays" class="md-nav__link">
      15. Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../16-string/index.html" title="16. Strings" class="md-nav__link">
      16. Strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../17-call-by-reference/index.html" title="17. Call by Reference" class="md-nav__link">
      17. Call by Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../18-heap/index.html" title="18. Heap" class="md-nav__link">
      18. Heap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../19-md-array/index.html" title="19. Multidimensional Array" class="md-nav__link">
      19. Multidimensional Array
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../20-macro/index.html" title="20. C Pre-processing" class="md-nav__link">
      20. C Pre-processing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../21-assert/index.html" title="21. Assert" class="md-nav__link">
      21. Assert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../22-efficiency/index.html" title="22. Efficiency" class="md-nav__link">
      22. Efficiency
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../23-search/index.html" title="23. Binary Search" class="md-nav__link">
      23. Binary Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../24-sort/index.html" title="24. Sorting" class="md-nav__link">
      24. Sorting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../25-tower/index.html" title="25. Tower of Hanoi" class="md-nav__link">
      25. Tower of Hanoi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../26-permutation/index.html" title="26. Permutation" class="md-nav__link">
      26. Permutation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        27. N Queens
      </label>
    
    <a href="index.html" title="27. N Queens" class="md-nav__link md-nav__link--active">
      27. N Queens
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recursive-formulation" title="Recursive Formulation" class="md-nav__link">
    Recursive Formulation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-generate-all-permutations" title="Approach 1: Generate All Permutations" class="md-nav__link">
    Approach 1: Generate All Permutations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-pruning-impossible-solutions" title="Approach 2: Pruning Impossible Solutions" class="md-nav__link">
    Approach 2: Pruning Impossible Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-27" title="Problem Set 27" class="md-nav__link">
    Problem Set 27
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-271" title="Problem 27.1" class="md-nav__link">
    Problem 27.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-272" title="Problem 27.2" class="md-nav__link">
    Problem 27.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-complete-code-written-in-lecture" title="Appendix: Complete Code Written in Lecture" class="md-nav__link">
    Appendix: Complete Code Written in Lecture
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Exercises
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ex01/index.html" title="1. Freezer" class="md-nav__link">
      1. Freezer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ex02/index.html" title="2. Leap, Suffix, Days" class="md-nav__link">
      2. Leap, Suffix, Days
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ex03/index.html" title="3. Binary, Rectangle, Fibonacci, Prime" class="md-nav__link">
      3. Binary, Rectangle, Fibonacci, Prime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ex04/index.html" title="4. ID, Grade, Index, Max" class="md-nav__link">
      4. ID, Grade, Index, Max
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ex05/index.html" title="5. Square, Escape, Magic" class="md-nav__link">
      5. Square, Escape, Magic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Assignments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Assignments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../assignment/index.html" title="General Guide" class="md-nav__link">
      General Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as01/index.html" title="1. Invest, Box, Digits, and Taxi" class="md-nav__link">
      1. Invest, Box, Digits, and Taxi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as01-comments/index.html" title="1. Comments and Answer Keys" class="md-nav__link">
      1. Comments and Answer Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as02/index.html" title="2. Collatz, Weekday, Circle, Pattern" class="md-nav__link">
      2. Collatz, Weekday, Circle, Pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as02-comments/index.html" title="2. Comments and Answer Keys" class="md-nav__link">
      2. Comments and Answer Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as03/index.html" title="3. Kendall, Histogram, CountingSort" class="md-nav__link">
      3. Kendall, Histogram, CountingSort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as03-comments/index.html" title="3. Comments and Answer Keys" class="md-nav__link">
      3. Comments and Answer Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as04/index.html" title="4. SelectionSort, Add, Mastermind" class="md-nav__link">
      4. SelectionSort, Add, Mastermind
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as04-comments/index.html" title="4. Comments and Answer Keys" class="md-nav__link">
      4. Comments and Answer Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as05/index.html" title="5. Social, Life" class="md-nav__link">
      5. Social, Life
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as05-comments/index.html" title="5. Comments and Answer Keys" class="md-nav__link">
      5. Comments and Answer Keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as06/index.html" title="6. Permutation 1 2 3" class="md-nav__link">
      6. Permutation 1 2 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as07/index.html" title="7. Peak, Scripts, Inversion" class="md-nav__link">
      7. Peak, Scripts, Inversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../as08/index.html" title="8. Maze, Fill" class="md-nav__link">
      8. Maze, Fill
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quiz/index.html" title="Quizzes" class="md-nav__link">
      Quizzes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Kahoot!
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Kahoot!
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../kahoot01/index.html" title="Flow Charts" class="md-nav__link">
      Flow Charts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../c-in-cs1010/index.html" title="C in CS1010" class="md-nav__link">
      C in CS1010
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../style/index.html" title="Style Guide" class="md-nav__link">
      Style Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/index.html" title="Documentation Guide" class="md-nav__link">
      Documentation Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../readings/index.html" title="Readings" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Software/Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../environments/index.html" title="Programming Environments" class="md-nav__link">
      Programming Environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unix/index.html" title="UNIX" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../clang/index.html" title="CLang" class="md-nav__link">
      CLang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vim/index.html" title="Vim" class="md-nav__link">
      Vim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lldb/index.html" title="LLDB" class="md-nav__link">
      LLDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../library/index.html" title="CS1010 I/O" class="md-nav__link">
      CS1010 I/O
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recursive-formulation" title="Recursive Formulation" class="md-nav__link">
    Recursive Formulation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-generate-all-permutations" title="Approach 1: Generate All Permutations" class="md-nav__link">
    Approach 1: Generate All Permutations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-pruning-impossible-solutions" title="Approach 2: Pruning Impossible Solutions" class="md-nav__link">
    Approach 2: Pruning Impossible Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-27" title="Problem Set 27" class="md-nav__link">
    Problem Set 27
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-271" title="Problem 27.1" class="md-nav__link">
    Problem 27.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-272" title="Problem 27.2" class="md-nav__link">
    Problem 27.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-complete-code-written-in-lecture" title="Appendix: Complete Code Written in Lecture" class="md-nav__link">
    Appendix: Complete Code Written in Lecture
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nus-cs1010/1819-s1/edit/master/docs/27-queens.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="unit-27-n-queens">Unit 27: N Queens</h1>
<p>We now look at how recursion can help with solving problems that require <em>searching and backtracking</em>.  A classical example for this is the <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span>-queens problem, which can be stated as given a <span><span class="MathJax_Preview">n \times n</span><script type="math/tex">n \times n</script></span> chessboard, find a possible placement of <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> queens on the chessboard, such that the queens do not threaten each other.    In other words, there is exactly one queen in each row, in each column, and in each diagonal.  The 8-queens puzzle was first published by Max Bezzel in 1848, with the first solution published Franz Nauck in 1850.
The generalized <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span>-queens problems were introduced later.  It is known that there is no solution for <span><span class="MathJax_Preview">n = 2</span><script type="math/tex">n = 2</script></span> and <span><span class="MathJax_Preview">n = 3</span><script type="math/tex">n = 3</script></span>, but a solution exists for <span><span class="MathJax_Preview">n &gt; 3</span><script type="math/tex">n > 3</script></span>.</p>
<p>If we visualize the chessboard as a 2D array, with <code class="codehilite">#</code> as the position of a queen, and <code class="codehilite">.</code> as an empty position on the board, then a solution to the 4-queens problem looks like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>.#..
...#
#...
..#.
</pre></div>
</td></tr></table>

<h2 id="recursive-formulation">Recursive Formulation</h2>
<p>Let's see how we can formulate the problem recursively.  The first step is to simplify the problem to the most trivial case where we can solve it.  It is tempting to say that a simpler version of the problem is an <span><span class="MathJax_Preview">n-1</span><script type="math/tex">n-1</script></span>-queens problem, and so the most trivial case is 1-queen.  While the solution to 1-queen is trivial, there is no solution to both 2-queen and 3-queen problems.  Further, if we have found a solution to the <span><span class="MathJax_Preview">n-1</span><script type="math/tex">n-1</script></span>-queens problem, extending it to a solution of <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span>-queens problem is not trivial.  </p>
<h3 id="approach-1-generate-all-permutations">Approach 1: Generate All Permutations</h3>
<p>As a start, let's borrow the idea from <a href="../26-permutation/index.html">Unit 26</a> and generate all permutations of the queens' positions.  Let's label the columns <code class="codehilite">a</code>, <code class="codehilite">b</code>, <code class="codehilite">c</code>, .. etc.  Since we know that there must be exactly one queen in each row, and one queen in each column, the positions of the queens can be represented as a string that is a permutation of <code class="codehilite">abcde..</code>.  For instance, the solution of the 4-queen problem depicted above can be represented by <code class="codehilite">bdac</code>.</p>
<p>A simple algorithm is thus to generate all possible <span><span class="MathJax_Preview">n!</span><script type="math/tex">n!</script></span> permutations, and for each one, check if it is a valid placement.  We already ensure that there is exactly one queen per row and one queen per column.  It remains to check that the queens do not threaten each other diagonally.</p>
<p>Let's write a function that checks, given a string representation of the queen positions, whether there is any queen that threaten another or not:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">bool</span> <span class="nf">has_a_queen_in_diagonal</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">len</span><span class="p">,</span> <span class="kt">long</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">curr_col</span> <span class="o">=</span> <span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">left_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">right_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">row</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">left_col</span> <span class="o">||</span> <span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">right_col</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">left_col</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">right_col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">threaten_each_other_diagonally</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// for each queen in row i, check rows i+1 onwards, </span>
    <span class="c1">// on both left (-=1) and right (+=1) side, if there </span>
    <span class="c1">// is a queen in that column.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">has_a_queen_in_diagonal</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Solving the <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> queens problem is then easy.  The code below prints out all possible solutions to the <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> queens problem.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<h3 id="approach-2-pruning-impossible-solutions">Approach 2: Pruning Impossible Solutions</h3>
<p>One of the principles to writing efficient code is to avoid doing useless work.  The code above, which tests all permutations, actually generates much work that is useless.  Suppose the queens in the first two rows already threaten each other, then, there is no need to continue to generate all possible placements of queens for the remaining rows.</p>
<p>This concept is called <em>pruning</em> and is a key to speeding up many searching-based solutions.  We want to prune away bad solutions as early as possible.  This can be achieved easily, by checking if the queens already placed on the first <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> rows threaten each other.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Adding these two conditionals can speed up the code significantly.</p>
<h2 id="problem-set-27">Problem Set 27</h2>
<h3 id="problem-271">Problem 27.1</h3>
<p>In the code for Approach 2 above, we check if the queens placed on Rows 0 to <code class="codehilite">row</code> threaten each other, and call <code class="codehilite">nqueens</code> recursively only if these queens do not threaten each other.  Identify the repetitive work being done in the calls <code class="codehilite">threaten_each_other_diagonally</code>, and suggest a way to remove the repetitive work.</p>
<h3 id="problem-272">Problem 27.2</h3>
<p>Consider the code to generate all possible permutations of a string from Problem 26.1.  Suppose that we restrict the permutations to those where the same character does not appear next to each other.  Modify the solution to Problem 26.1 to prune away permutations where the same character appears more than once consecutively.</p>
<h2 id="appendix-complete-code-written-in-lecture">Appendix: Complete Code Written in Lecture</h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;cs1010.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdbool.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">static</span> <span class="kt">char</span> <span class="n">clear_screen</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">27</span><span class="p">,</span> <span class="sc">&#39;[&#39;</span><span class="p">,</span> <span class="sc">&#39;2&#39;</span><span class="p">,</span> <span class="sc">&#39;J&#39;</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span> <span class="sc">&#39;[&#39;</span><span class="p">,</span> <span class="sc">&#39;;&#39;</span><span class="p">,</span> <span class="sc">&#39;H&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
  <span class="n">cs1010_print_string</span><span class="p">(</span><span class="n">clear_screen</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">col</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="sc">&#39;a&#39;</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;#&#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">usleep</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">char</span> <span class="n">a</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">i</span><span class="p">,</span> <span class="kt">long</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
  <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">has_a_queen_in_diagonal</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">len</span><span class="p">,</span> <span class="kt">long</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">curr_col</span> <span class="o">=</span> <span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">left_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">right_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">row</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">left_col</span> <span class="o">||</span> <span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">right_col</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">left_col</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">right_col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">threaten_each_other_diagonally</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// for each queen in row i, check rows i+1 onwards, </span>
    <span class="c1">// on both left (-=1) and right (+=1) side, if there </span>
    <span class="c1">// is a queen in that column.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">has_a_queen_in_diagonal</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
      <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
<span class="p">{</span>
  <span class="kt">long</span> <span class="n">n</span> <span class="o">=</span> <span class="n">cs1010_read_long</span><span class="p">();</span>
  <span class="kt">char</span> <span class="n">queens</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">curr</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span><span class="p">;</span>
    <span class="n">curr</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">queens</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

  <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../26-permutation/index.html" title="26. Permutation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                26. Permutation
              </span>
            </div>
          </a>
        
        
          <a href="../ex01/index.html" title="1. Freezer" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                1. Freezer
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Department of Computer Science, National University of Singapore 2018
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>